/*! ko.remote-template-engine - v1.0.0 - 2014-11-06
* Copyright (c) 2014 ; Licensed  */
!function(a,b){"function"==typeof define&&define.amd?define(["knockout"],function(a){return b(a)}):b(a.ko)}(this,function(a){var b=function(a){return a&&a.replace(/\/?$/,"/")},c=new a.nativeTemplateEngine,d={};c.defaultPath="templates",c.defaultSuffix=".tmpl.html",c.ajax=function(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){4===b.readyState&&a.success(b.responseText)},b.open("GET",a.url,!0),b.send(null)},a.templateSources.remoteTemplate=function(b){this.key=b,this.template=a.observable(" "),this.requested=!1,this.retrieved=!1},a.templateSources.remoteTemplate.prototype.text=function(){return!this.requested&&this.key&&(c.ajax({url:[b(c.defaultPath)+this.key+c.defaultSuffix].join(""),success:function(a){this.retrieved=!0,this.template(a)}.bind(this)}),this.requested=!0),this.key||this.template(""),0===arguments.length?this.template():void 0},c.makeTemplateSource=function(b,c){var e;return"string"==typeof b?(e=(c||document).getElementById(b),e&&"script"===e.tagName.toLowerCase()?new a.templateSources.domElement(e):(b in d||(d[b]=new a.templateSources.remoteTemplate(b)),d[b])):!b||1!==b.nodeType&&8!==b.nodeType?void 0:new a.templateSources.anonymousTemplate(b)},c.renderTemplate=function(b,d,e,f){var g=c.makeTemplateSource(b,f),h=e&&e.afterRender;return"function"==typeof h&&g instanceof a.templateSources.remoteTemplate&&!g.retrieved&&(e.afterRender=function(){g.retrieved&&h.apply(this,arguments)}),c.renderTemplateSource(g,d,e)},a.remoteTemplateEngine=c,a.setTemplateEngine(c)});